from pyrogram import Client, filters
from pyrogram.types import Message
import random
import json
import os

API_ID = 25863650
API_HASH = "fde095aa1f406d52cb80a7bccaebb721"
BOT_TOKEN = "8193538818:AAE-2gwr2U7zTFCHDxBoEzXweNSwSIqTfTk"
OWNER_ID = 5122052972

app = Client("AutoCaptionBot", api_id=API_ID, api_hash=API_HASH, bot_token=BOT_TOKEN)

CAPTIONS = [
    "π—›π—®π—®ππ—µ π—Ήπ—®π—΄π—®π—»π—² π—Έπ—® π—Ίπ—®π—»π—» π—µπ—®π—¶β€¦ π—½π—®π—Ώ π€π—¶π—Ώπ—³ π—±π—²π—Έπ—µ π—Έπ—² π—µπ—¶ ππ—Ώπ—¶π—½ π—µπ—Ό π—Ώπ—®π—µπ—® π—µπ—Όπ—Όπ—» ππ’¦",
    "π—–π—Όπ—»ππ—Ώπ—Όπ—Ή π—»π—®π—µπ—¶ π—µπ—Όππ—®β€¦ π—½π—®π—Ώ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π€π—®π—― π—Έπ—®π—Ώ π—Ήπ—¶π†π—® ππ”¥",
    "π—£π—®π—Έπ—®π—±π—»π—² π—Έπ—® π—Ίπ—®π—»π—» π—µπ—®π—¶β€¦ π—½π—®π—Ώ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π—³π—²π—²π—Ή π—Έπ—®π—Ώπ—»π—² π—±π—² ππ’‹",
    "π—π—®π—½π—²ππ—»π—² π—Έπ—® π—Ίπ—Όπ—Όπ—± π—µπ—®π—¶β€¦ π—½π—®π—Ώ π—±π—²π—Έπ—µ π—Έπ—² π—µπ—¶ π—Έπ—®π—®π—Ί π—°π—µπ—®π—Ήπ—® π—Ώπ—®π—µπ—® π—µπ—Όπ—Όπ—» ππ’¦",
    "π—§π—Όπ‚π—°π—µ π—Έπ—®π—Ώπ—»π—² π—Έπ—® π—½π—Ήπ—®π—» π—µπ—®π—¶β€¦ π—½π—®π—Ώ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π‚π—»π—±π—Ώπ—²π€π€ π—µπ—Ό π—Ώπ—®π—µπ—® π—µπ—®π—¶ ππ”¥",
    "π—§π—²π—Ώπ—² π—°π‚π—Ώπƒπ—²π€ π—½π—² π—µπ—®π—®ππ—µ π—½π—µπ—¶π—Ώπ—®π—»π—² π—Έπ—® π—Ίπ—®π—»π—» π—µπ—®π—¶β€¦ π—½π—®π—Ώ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π—Έπ—®π—®π—³π—¶ π—µπ—®π—¶ ππ’‹",
    "π—•π—®π€ π—±π—²π—Έπ—µ π—Έπ—² π—µπ—¶ π—µπ—Όπ—Ώπ—»π† π—µπ—Ό π—΄π—®π†π—®β€¦ ππ’¦",
    "π——π—¶π—Ή π—Έπ—®π—Ώππ—® π—µπ—®π—¶ π—Έπ—µπ—²π—²π—»π—°π—µ π—Ήπ—Όπ—Όπ—»β€¦ π—½π—®π—Ώ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π€ππ—Ώπ—¶π—½ π—Έπ—®π—Ώ π—Ώπ—®π—µπ—® π—µπ—Όπ—Όπ—» ππ”¥",
    "π—£π—®π—Έπ—®π—±π—»π—² π—Έπ—¶ π—¶π—°π—µπ—µπ—® π—µπ—®π—¶β€¦ π—½π—®π—Ώ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π—µπ—¶ ππ—Ώπ—¶π—½ π—µπ—Ό π—Ώπ—®π—µπ—® π—µπ—Όπ—Όπ—» ππ’¦",
    "π—–π—µπ—µπ—²π—±π—»π—² π—Έπ—® π—Ίπ—Όπ—Όπ—± π—µπ—®π—¶β€¦ π—½π—®π—Ώ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π—µπ—¶ π—Έπ—µπ—²π—Ή π—Ώπ—®π—µπ—® π—µπ—Όπ—Όπ—» ππ’‹",
    "π—•π—Όπ—±π† π—Έπ—Ό π—³π—²π—²π—Ή π—Έπ—®π—Ώπ—»π—® π—µπ—®π—¶β€¦ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π—µπ—¶ π—»π—®π€π—µπ—® π—µπ—Ό π—΄π—®π†π—® ππ”¥",
    "π—π—µπ—® π—Ήπ—²π—»π—² π—Έπ—® π—Ίπ—®π—»π—» π—µπ—®π—¶β€¦ π—±π—²π—Έπ—µ π—Έπ—² π—µπ—¶ ππ—Ώπ—¶π—½ π—µπ—Ό π—Ώπ—®π—µπ—® π—µπ—Όπ—Όπ—» ππ’¦",
    "π—›π—®π—®ππ—µ π€π—² ππ—Όπ‚π—°π—µ π—Έπ—®π—Ώπ‚π—»? π—΅π—®π—µπ—¶β€¦ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π—Έπ—®π—®π—³π—¶ π—µπ—®π—¶ ππ’‹",
    "π—”π—®π—· π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π€ππ—Ώπ—¶π—½ π—Έπ—®π—Ώπ—»π—² π—Έπ—® π—Ίπ—®π—»π—» π—µπ—®π—¶β€¦ ππ”¥",
    "π— π—®π—»π—» π—Έπ—®π—Ώππ—® π—µπ—®π—¶ π€π—®π—― π—Έπ‚π—°π—µ π—Έπ—®π—Ώ π—Ήπ—Όπ—Όπ—»β€¦ π—±π—²π—Έπ—µπ—»π—² π—Ίπ—²π—¶π—» π—µπ—¶ π—Ίπ—®π‡π—® π—µπ—®π—¶ ππ’¦",
    "π—–π—Όπ—»ππ—Ώπ—Όπ—Ή π—»π—®π—µπ—¶ π—µπ—Ό π—Ώπ—®π—µπ—®β€¦ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π€π—®π—― π—Έπ—®π—Ώ π—Ήπ—¶π†π—® ππ’‹",
    "π——π—¶π—Ή π—Έπ—®π—Ώππ—® π—µπ—®π—¶ π—΄π—®π—Ήπ—² π—Ήπ—®π—΄π—® π—Ήπ—Όπ—Όπ—»β€¦ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π—½π—Όπ€π€π—²π€π€ π—Έπ—®π—Ώ π—Ώπ—®π—µπ—® π—µπ—Όπ—Όπ—» ππ”¥",
    "π—–π—µπ—µπ—²π—± π—°π—µπ—µπ—®π—± π—Έπ—®π—Ώπ—»π—² π—Έπ—® π—Ίπ—®π—»π—» π—µπ—®π—¶β€¦ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π—Έπ—®π—Ώ π—Ώπ—®π—µπ—® π—µπ—Όπ—Όπ—» ππ’¦",
    "π—”π—®π—· π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π—µπ—¶ π€π—®π—― π—Έπ‚π—°π—µ π—Έπ—®π—Ώπ—»π—² π—Έπ—® π—Ίπ—Όπ—Όπ—± π—µπ—®π—¶ ππ’‹",
    "π—§π—²π—Ώπ—² π—°π‚π—Ώπƒπ—²π€ π—®π—®π—»π—Έπ—µπ—Όπ—» π€π—² π—µπ—¶ π—―π—µπ—¶π—΄π—Ό π—±π—¶π—²β€¦ ππ”¥",
]

REACTION_LINE = "β¤οΈβ€π”¥ π—¥π—π—”π—–π—§π—π—Άπ—΅π—¦ π—•π—›π— π——π—π——π—Ά π¥Ί"

@app.on_message(filters.channel)
async def auto_caption(client, message: Message):
    try:
        chat = await client.get_chat(message.chat.id)
        channel_name = f"<b>{chat.title}</b>"
        post_link = f"https://t.me/c/{str(chat.id)[4:]}/{message.id}"
        random_caption = random.choice(CAPTIONS)

        final_caption = (
            f"<blockquote>{channel_name}</blockquote>\n\n"
            f"π’¬ <b>{random_caption}</b>\n\n"
            f"<blockquote>{post_link}</blockquote>\n\n"
            f"{REACTION_LINE}"
        )

        if message.photo or message.video or message.document:
            await message.edit_caption(final_caption, parse_mode="html")

    except Exception as e:
        print(f"Error: {e}")

app.run()	